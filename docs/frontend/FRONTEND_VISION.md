# 🎨 Видение фронтенда Go2Asia — PWA-оболочка и все модули

> **Документ описывает полное видение пользовательских интерфейсов экосистемы Go2Asia**, включая PWA-оболочку, стартовую страницу, все 9 модулей, админ-панели и личные кабинеты.  
> Основано на: PWA Strategy, UI/UX Style Guide v1.1, Domain Architecture, Roadmap и Ecosystem Full.

---

## 📋 Содержание

1. [PWA-оболочка (App Shell)](#1-pwa-оболочка-app-shell)
2. [Стартовая страница (Landing)](#2-стартовая-страница-landing)
3. [Модули экосистемы](#3-модули-экосистемы)
   - [Guru Asia](#31-guru-asia)
   - [Atlas Asia](#32-atlas-asia)
   - [Pulse Asia](#33-pulse-asia)
   - [Blog Asia](#34-blog-asia)
   - [Space Asia](#35-space-asia)
   - [Quest Asia](#36-quest-asia)
   - [Russian Friendly Asia](#37-russian-friendly-asia)
   - [Rielt.Market Asia](#38-rieltmarket-asia)
   - [Connect Asia](#39-connect-asia)
4. [Админ-панели](#4-админ-панели)
5. [Личные кабинеты](#5-личные-кабинеты)

---

## 1. PWA-оболочка (App Shell)

### 1.1 Архитектурное видение

**App Shell** — это единая оболочка приложения, которая обеспечивает:
- Общую навигацию и UI-каркас для всех модулей
- Единую аутентификацию через Clerk SSO
- Сервис-воркер для офлайн-режима и кеширования
- Ленивую загрузку микрофронтендов модулей
- Глобальные компоненты (TopAppBar, BottomNav, SideDrawer)

### 1.2 Структура компонентов

#### **TopAppBar (Верхняя панель)**
```
┌─────────────────────────────────────────────────────────┐
│ [Logo] Go2Asia  [Поиск]  [Уведомления] [Профиль] [☰]   │
└─────────────────────────────────────────────────────────┘
```

**Компоненты:**
- **Логотип** — кликабельный, ведёт на `/`
- **Глобальный поиск** — поиск по всем модулям (Atlas, Pulse, Blog, Space)
- **Уведомления** — бейдж с количеством непрочитанных (Space, Quest, Connect)
- **Профиль** — аватар пользователя или кнопка "Войти"
- **Меню** (☰) — на мобильных открывает SideDrawer

**Технические детали:**
- Sticky позиционирование (`sticky top-0 z-50`)
- Адаптивность: на мобильных скрывается часть элементов
- Цвет: `bg-white border-b border-slate-200 shadow-sm`
- Высота: `h-16` (64px) на десктопе, `h-14` (56px) на мобильных

#### **BottomNav (Нижняя навигация) — мобильные**
```
┌─────────────────────────────────────────┐
│  [🏠]    [🗺️]    [📅]    [🎯]    [👤]  │
│ Главная  Карта   События Квесты Профиль│
└─────────────────────────────────────────┘
```

**Иконки и маршруты:**
- 🏠 **Главная** → `/` (Guru или Landing)
- 🗺️ **Карта** → `/atlas` (Atlas Asia)
- 📅 **События** → `/pulse` (Pulse Asia)
- 🎯 **Квесты** → `/quest` (Quest Asia)
- 👤 **Профиль** → `/space/me` (Space Asia — личный профиль)

**Особенности:**
- Видима только на мобильных (`hidden lg:flex` на десктопе)
- Активная вкладка подсвечивается (`bg-sky-600 text-white`)
- Бейджи уведомлений на иконках (если есть непрочитанные)

#### **SideDrawer (Боковое меню) — планшеты/десктоп**
```
┌─────────────────────┐
│  Go2Asia            │
├─────────────────────┤
│ 🏠 Главная          │
│ 🗺️ Atlas Asia       │
│ 📅 Pulse Asia       │
│ 📝 Blog Asia        │
│ 👥 Space Asia       │
│ 🎯 Quest Asia       │
│ 🤝 Russian Friendly  │
│ 🏠 Rielt.Market     │
│ 💰 Connect Asia      │
│ ─────────────────── │
│ ⚙️ Настройки        │
│ ❓ Помощь            │
│ 🚪 Выйти            │
└─────────────────────┘
```

**Особенности:**
- Выдвигается слева при клике на ☰
- Overlay затемняет фон
- Закрывается по клику вне меню или ESC
- Группировка: основные модули → служебные → выход

#### **FAB (Floating Action Button) — контекстная кнопка**
```
        ┌───┐
        │ + │  ← Плавающая кнопка создания контента
        └───┘
```

**Контекстные действия:**
- На `/space` → "Создать пост"
- На `/pulse` → "Создать событие" (для PRO)
- На `/quest` → "Создать квест" (для PRO)
- На `/atlas` → "Предложить место" (для всех)
- На `/rf` → "Стать партнёром" (для PRO)

**Технические детали:**
- Фиксированная позиция (`fixed bottom-20 right-4`)
- Анимация появления (`animate-fade-in-up`)
- Меню действий раскрывается при клике (Material Design pattern)

### 1.3 Сервис-воркер и PWA-манифест

**Манифест (`manifest.webmanifest`):**
```json
{
  "name": "Go2Asia",
  "short_name": "Go2Asia",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#1677FF",
  "background_color": "#F8FAFC",
  "icons": [
    { "src": "/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}
```

**Стратегии кеширования:**
- **App Shell** → `Stale-While-Revalidate`
- **Remote модули** → `Stale-While-Revalidate`
- **API запросы** → `Network-First` с fallback в кеш
- **Изображения** → `Cache-First` с LRU (лимит ~50 МБ)
- **Картографические тайлы** → `Cache-First` (лимит ~100 МБ)

**Офлайн-страница:**
- Путь: `/offline`
- Сообщение: "Вы офлайн — доступен сохранённый контент"
- Ссылки на последние просмотренные разделы

### 1.4 Маршрутизация и навигация

**Структура URL:**
```
/                          → Landing / Guru (главная)
/atlas/*                   → Atlas Asia
/pulse/*                   → Pulse Asia
/blog/*                    → Blog Asia
/guru/*                    → Guru Asia
/space/*                   → Space Asia
/quest/*                   → Quest Asia
/rf/*                      → Russian Friendly Asia
/rielt/*                   → Rielt.Market Asia
/connect/*                 → Connect Asia
/profile/*                 → Личный кабинет
/admin/*                   → Админ-панель
```

**Deeplinks:**
- Схема: `go2asia://module/path`
- Пример: `go2asia://atlas/place/bangkok-grand-palace`
- Конвертация: `go2asia://` ↔ `https://go2asia.space/`

---

## 2. Стартовая страница (Landing)

### 2.1 Видение главной страницы

**Цель:** Первое впечатление пользователя, онбординг, навигация по экосистеме.

### 2.2 Структура страницы

#### **Hero Section (Главный баннер)**
```
┌─────────────────────────────────────────────────────┐
│                                                     │
│         🌏 Go2Asia                                  │
│    Экосистема путешествий в Юго-Восточной Азии     │
│                                                     │
│  [Начать путешествие]  [Узнать больше]             │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**Элементы:**
- Крупный заголовок с логотипом
- Подзаголовок с описанием
- Две CTA-кнопки: "Начать путешествие" (→ `/guru`) и "Узнать больше" (→ scroll down)
- Фоновое изображение (опционально) или градиент

#### **Quick Launch Grid (Быстрый запуск модулей)**
```
┌──────────┬──────────┬──────────┬──────────┐
│  🗺️      │  📅      │  📝      │  👥      │
│  Atlas   │  Pulse   │  Blog    │  Space   │
│  Места   │  События │  Статьи  │  Сообщество│
└──────────┴──────────┴──────────┴──────────┘
┌──────────┬──────────┬──────────┬──────────┐
│  🎯      │  🤝      │  🏠      │  💰      │
│  Quest   │  RF      │  Rielt   │  Connect │
│  Квесты  │  Партнёры│  Жильё   │  Кошелёк │
└──────────┴──────────┴──────────┴──────────┘
```

**Компонент ModuleCard:**
- Иконка модуля (Lucide React)
- Название модуля
- Краткое описание
- Ссылка на модуль
- Hover-эффект: поднятие карточки (`hover:-translate-y-1`)

#### **Personal Welcome (Персональное приветствие)**
Для авторизованных пользователей:
```
┌─────────────────────────────────────────┐
│ 👋 Привет, Иван!                        │
│                                         │
│ У вас 1,234 Points • 3 новых события   │
│                                         │
│ [Открыть Guru] [Мой профиль]           │
└─────────────────────────────────────────┘
```

#### **Benefits List (Преимущества экосистемы)**
```
┌─────────────────────────────────────────┐
│ ✅ Актуальная информация о местах       │
│ ✅ События и мероприятия рядом          │
│ ✅ Сообщество путешественников          │
│ ✅ Квесты и награды                     │
│ ✅ Партнёрские скидки                   │
└─────────────────────────────────────────┘
```

#### **Content Teaser Cards (Превью контента)**
Показываются карточки из разных модулей:
- 3 популярных места из Atlas
- 3 ближайших события из Pulse
- 3 свежих статьи из Blog

#### **Footer (Подвал)**
- Ссылки на модули
- Социальные сети
- Правовая информация (Privacy, Terms)
- Язык: RU / EN / VI

---

## 3. Модули экосистемы

### 3.1 Guru Asia

**Роль:** Главный экран путешественника — "гид рядом со мной"

#### **Главная страница (`/guru`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ [🔍 Поиск] [📍 Моё местоположение]     │
├─────────────────────────────────────────┤
│                                         │
│         [Карта Leaflet/Mapbox]         │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 📍 Кафе "Кофе и Код"            │   │
│  │   150 м • Открыто • RF          │   │
│  │   [Подробнее]                   │   │
│  ├─────────────────────────────────┤   │
│  │ 📅 Фестиваль еды                │   │
│  │   500 м • Завтра 18:00          │   │
│  │   [Участвовать]                 │   │
│  ├─────────────────────────────────┤   │
│  │ 🏠 Студия у пляжа               │   │
│  │   200 м • 1,500 THB/ночь        │   │
│  │   [Смотреть]                    │   │
│  └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
```

**Компоненты:**
- **Карта** — Leaflet или Mapbox GL JS
- **Список объектов** — скроллируемый список карточек
- **Фильтры** — типы объектов (места, события, жильё, люди)
- **Геолокация** — кнопка "Моё местоположение"

**Карточка объекта (EntityCard):**
- Иконка типа объекта
- Название
- Расстояние и время пешком
- Статус (открыто/закрыто, RF-бейдж)
- Действия (Подробнее, Участвовать, Связаться)

**Офлайн-режим:**
- Показывает последние 20-50 просмотренных объектов
- Кешированные тайлы карты вокруг последней локации
- Сообщение: "Офлайн режим — показаны сохранённые данные"

#### **Детальная страница объекта (`/guru/object/:id`)**
- Полная информация об объекте
- Ссылки на соответствующий модуль (Atlas/Pulse/Rielt)
- Кнопка "Открыть в [модуле]"

---

### 3.2 Atlas Asia

**Роль:** Wiki-энциклопедия мест и локаций

#### **Главная страница (`/atlas`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 🌏 Atlas Asia                           │
│ Справочник мест Юго-Восточной Азии     │
├─────────────────────────────────────────┤
│ [🔍 Поиск] [🌍 Страны] [🏙️ Города]    │
├─────────────────────────────────────────┤
│                                         │
│ ┌──────────┬──────────┬──────────┐    │
│ │ [Фото]   │ [Фото]   │ [Фото]   │    │
│ │ Таиланд  │ Вьетнам  │ Индонезия│    │
│ │ 245 мест │ 189 мест │ 312 мест │    │
│ └──────────┴──────────┴──────────┘    │
│                                         │
│ Популярные места:                       │
│ ┌─────────────────────────────────┐   │
│ │ 📍 Большой дворец, Бангкок      │   │
│ │   ⭐ 4.8 • 1,234 отзыва         │   │
│ │   [Подробнее]                   │   │
│ └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
```

**Компоненты:**
- **Hero Section** — заголовок и описание
- **Навигация** — вкладки: Страны, Города, Места, Коллекции
- **Карточки стран** — сетка с флагами/фото
- **Популярные места** — список карточек

#### **Страница страны (`/atlas/countries/:slug`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 🇹🇭 Таиланд                              │
│ Королевство Таиланд                     │
├─────────────────────────────────────────┤
│ [Обзор] [Визы] [Жильё] [Транспорт] ... │
├─────────────────────────────────────────┤
│                                         │
│ TL;DR: Краткая информация о стране      │
│                                         │
│ Основные города:                        │
│ • Бангкок • Пхукет • Чиангмай          │
│                                         │
│ Популярные места:                       │
│ [Grid карточек мест]                    │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ Посты сообщества:                       │
│ [UGC блок с постами о стране]           │
└─────────────────────────────────────────┘
```

**Tabs (вкладки):**
- Обзор — общая информация
- Визы — визовая информация
- Жильё — информация о жилье
- Транспорт — как добраться
- Работа — работа в стране
- Культура — культурные особенности
- Бизнес — бизнес-информация

**UGC-блок:**
- Заголовок "Посты сообщества"
- Фильтры: Все / Новые / Полезные
- Карточки постов с бейджами (UGC, Verified, Has Prices, Has Dates)
- Пагинация "Показать ещё"

#### **Страница места (`/atlas/places/:slug`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 📍 Большой дворец, Бангкок             │
│ ⭐ 4.8 • 1,234 отзыва • Проверено      │
├─────────────────────────────────────────┤
│                                         │
│ [Галерея фото]                          │
│                                         │
│ Описание места...                       │
│                                         │
│ 📍 Адрес: Na Phra Lan Rd, Phra Nakhon  │
│ 🕐 Часы работы: 8:30 - 15:30           │
│ 💰 Цена: 500 THB                        │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ Посты сообщества:                       │
│ [UGC блок]                              │
│                                         │
│ Связанные места:                        │
│ [Grid карточек]                         │
└─────────────────────────────────────────┘
```

---

### 3.3 Pulse Asia

**Роль:** Событийный календарь региона

#### **Главная страница (`/pulse`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 📅 Pulse Asia                           │
│ События и мероприятия                   │
├─────────────────────────────────────────┤
│ [Сегодня] [Завтра] [Выходные] [Все]    │
│ [🔍 Поиск] [📍 Рядом] [📅 Календарь]  │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ [Фото] Фестиваль еды            │   │
│ │ 📅 Завтра, 18:00                │   │
│ │ 📍 Пляж Камала                  │   │
│ │ 👥 45 участников                │   │
│ │ [Участвовать]                   │   │
│ └─────────────────────────────────┘   │
│                                         │
│ [Grid карточек событий]                │
└─────────────────────────────────────────┘
```

**Компоненты:**
- **Фильтры по дате** — чипы: Сегодня, Завтра, Выходные, Все
- **Поиск и фильтры** — поиск, геолокация, календарь
- **Карточки событий** — EventCard компонент

**EventCard:**
- Обложка события (фото)
- Дата и время (бейдж с датой overlay)
- Название и описание
- Место проведения
- Количество участников
- Кнопка "Участвовать"

#### **Календарный вид (`/pulse/calendar`)**
- Месячный календарь
- События отмечены на датах
- Клик по дате → список событий

#### **Страница события (`/pulse/events/:slug`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 📅 Фестиваль еды                        │
│ 📍 Пляж Камала • Завтра, 18:00         │
├─────────────────────────────────────────┤
│                                         │
│ [Обложка события]                       │
│                                         │
│ Описание события...                     │
│                                         │
│ Организатор: @pro_user                 │
│                                         │
│ [Участвовать] [Поделиться]              │
│                                         │
│ Участники (45):                        │
│ [Аватары участников]                    │
└─────────────────────────────────────────┘
```

---

### 3.4 Blog Asia

**Роль:** Медиацентр и социальная хроника

#### **Главная страница (`/blog`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 📝 Blog Asia                            │
│ Статьи и истории                        │
├─────────────────────────────────────────┤
│ [Все] [Путешествия] [Лайфстайл] [Бизнес]│
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ [Фото] Как переехать в Таиланд  │   │
│ │ 📝 Статья • 5 мин чтения        │   │
│ │ 👤 Автор: Иван PRO              │   │
│ │ 📅 2 дня назад                  │   │
│ │ [Читать →]                     │   │
│ └─────────────────────────────────┘   │
│                                         │
│ [Grid статей]                           │
└─────────────────────────────────────────┘
```

**Компоненты:**
- **Фильтры по категориям** — чипы категорий
- **Карточки статей** — ArticleCard компонент

**ArticleCard:**
- Обложка статьи (21:9 aspect ratio)
- Тип контента (Статья, Репортаж, Гид)
- Время чтения
- Заголовок и краткое описание
- Автор и дата публикации
- Кнопка "Читать →"

#### **Страница статьи (`/blog/:slug`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ Как переехать в Таиланд: полный гид     │
│ 👤 Иван PRO • 📅 2 дня назад • 5 мин    │
├─────────────────────────────────────────┤
│                                         │
│ [Обложка]                               │
│                                         │
│ Содержание:                             │
│ • Визы                                  │
│ • Жильё                                 │
│ • Работа                                │
│                                         │
│ [Markdown контент статьи]               │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ [Лайк] [Сохранить] [Поделиться]        │
│                                         │
│ Похожие статьи:                          │
│ [Grid карточек]                         │
└─────────────────────────────────────────┘
```

**Prose стили:**
- Используется `@tailwindcss/typography`
- Красивое форматирование заголовков, списков, цитат
- Встроенные изображения с rounded-xl
- Ссылки на места (Atlas) и события (Pulse)

---

### 3.5 Space Asia

**Роль:** Социальная сеть сообщества

#### **Главная страница (`/space`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 👥 Space Asia                           │
│ Социальная сеть сообщества              │
├─────────────────────────────────────────┤
│ [Моя лента] [Друзья] [Группы] [Популярное]│
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ [Аватар] О чём думаете?        │   │
│ │ [Создать пост]                 │   │
│ │ [📷 Фото] [📍 Место]           │   │
│ └─────────────────────────────────┘   │
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ 👤 Иван PRO • 2 часа назад      │   │
│ │                                 │   │
│ │ Текст поста...                  │   │
│ │ [Фото]                           │   │
│ │                                 │   │
│ │ ❤️ 24 • 💬 5 • 🔄 2            │   │
│ │ [❤️ Нравится] [💬 Комментировать]│   │
│ └─────────────────────────────────┘   │
│                                         │
│ [Бесконечная лента постов]              │
└─────────────────────────────────────────┘
```

**Компоненты:**
- **Создание поста** — форма с текстом, фото, геолокацией
- **Лента постов** — PostCard компоненты
- **Фильтры ленты** — чипы: Моя лента, Друзья, Группы, Популярное

**PostCard:**
- Аватар и имя автора
- Время публикации
- Текст поста
- Медиа (фото, видео)
- Статистика (лайки, комментарии, репосты)
- Действия (лайк, комментарий, поделиться)

#### **Профиль пользователя (`/space/:username`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ [Обложка]                               │
│                                         │
│ [Аватар] Иван PRO                       │
│ ✅ Проверен • 🎯 PRO-куратор            │
│                                         │
│ [Подписаться] [Написать]               │
│                                         │
│ Посты: 45 • Подписчики: 234            │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ [Посты] [О себе] [Достижения]          │
│                                         │
│ [Grid постов пользователя]              │
└─────────────────────────────────────────┘
```

---

### 3.6 Quest Asia

**Роль:** Квесты, миссии и маршруты

#### **Главная страница (`/quest`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 🎯 Quest Asia                           │
│ Квесты и миссии                         │
├─────────────────────────────────────────┤
│ [Все] [Активные] [Завершённые] [Мои]   │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ [Фото] Гастро-тур по Бали       │   │
│ │ 🎯 Квест • Средняя сложность    │   │
│ │ 📍 Бали • 5 шагов               │   │
│ │ ⏱️ 2 часа                        │   │
│ │ 🏆 +500 Points • NFT-бейдж       │   │
│ │ [Начать квест]                  │   │
│ └─────────────────────────────────┘   │
│                                         │
│ [Grid квестов]                          │
└─────────────────────────────────────────┘
```

**Компоненты:**
- **Фильтры** — чипы категорий и статусов
- **Карточки квестов** — QuestCard компонент

**QuestCard:**
- Обложка квеста
- Бейдж сложности (Легко/Средне/Сложно)
- Прогресс (если начат)
- Количество шагов и время
- Награды (Points, NFT)
- Кнопка "Начать квест" / "Продолжить"

#### **Страница квеста (`/quest/:id`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 🎯 Гастро-тур по Бали                   │
│ 📍 Бали • 5 шагов • 2 часа             │
├─────────────────────────────────────────┤
│                                         │
│ Описание квеста...                      │
│                                         │
│ Награды:                                │
│ • 500 Points                            │
│ • NFT-бейдж "Гурман Бали"               │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ Шаги квеста:                            │
│                                         │
│ ✅ 1. Посетить ресторан "Warung"        │
│    📍 Адрес: ...                        │
│    [Выполнить]                          │
│                                         │
│ ⬜ 2. Сделать фото блюда                │
│    [Выполнить]                          │
│                                         │
│ [Прогресс: 1/5]                         │
└─────────────────────────────────────────┘
```

**Офлайн-режим:**
- Активный квест сохраняется локально
- Можно продолжать без интернета
- Синхронизация при восстановлении связи

---

### 3.7 Russian Friendly Asia

**Роль:** Партнёрская программа и каталог бизнесов

#### **Главная страница (`/rf`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 🤝 Russian Friendly Asia                │
│ Партнёрские места и скидки              │
├─────────────────────────────────────────┤
│ [Все] [Рестораны] [Жильё] [Услуги]     │
│ [🔍 Поиск] [📍 Рядом]                  │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ [Фото] Ресторан "Вкусно"        │   │
│ │ 🇷🇺 Russian Friendly            │   │
│ │ ⭐ 4.9 • 234 отзыва             │   │
│ │ 📍 Бангкок                      │   │
│ │ 🎁 Скидка 10%                   │   │
│ │ [Получить ваучер]               │   │
│ └─────────────────────────────────┘   │
│                                         │
│ [Grid партнёров]                        │
└─────────────────────────────────────────┘
```

**Компоненты:**
- **Фильтры по категориям** — чипы категорий
- **Карточки партнёров** — RFCard компонент

**RFCard:**
- Обложка места
- Бейдж "Russian Friendly"
- Рейтинг и отзывы
- Локация
- Активный ваучер (скидка)
- Кнопка "Получить ваучер"

#### **Страница партнёра (`/rf/places/:id`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ Ресторан "Вкусно"                       │
│ 🇷🇺 Russian Friendly • ⭐ 4.9            │
├─────────────────────────────────────────┤
│                                         │
│ [Галерея фото]                          │
│                                         │
│ Описание заведения...                   │
│                                         │
│ 📍 Адрес: ...                           │
│ 🕐 Часы работы: ...                     │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ Активные ваучеры:                        │
│ ┌─────────────────────────────────┐   │
│ │ 🎁 Скидка 10%                   │   │
│ │ Действует до 31.12.2024         │   │
│ │ [Получить ваучер]               │   │
│ └─────────────────────────────────┘   │
│                                         │
│ Отзывы:                                 │
│ [Список отзывов из Space]               │
└─────────────────────────────────────────┘
```

#### **Кабинет партнёра (`/rf/partner/dashboard`)**

Для бизнес-партнёров:
- Управление профилем
- Создание ваучеров
- Статистика (просмотры, активации ваучеров)
- Отзывы клиентов

---

### 3.8 Rielt.Market Asia

**Роль:** Сервис аренды жилья

#### **Главная страница (`/rielt`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 🏠 Rielt.Market Asia                    │
│ Аренда жилья в Юго-Восточной Азии       │
├─────────────────────────────────────────┤
│ [🔍 Поиск] [📍 Город] [💰 Цена] [📅 Даты]│
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ [Фото] Студия у пляжа           │   │
│ │ 🏠 Краткосрочная аренда         │   │
│ │ 📍 Пхукет, пляж Камала          │   │
│ │ 💰 1,500 THB/ночь               │   │
│ │ 🇷🇺 Russian Friendly            │   │
│ │ [Подробнее]                    │   │
│ └─────────────────────────────────┘   │
│                                         │
│ [Grid объявлений]                       │
└─────────────────────────────────────────┘
```

**Компоненты:**
- **Расширенные фильтры** — город, цена, даты, тип аренды
- **Карточки объявлений** — ListingCard компонент

**ListingCard:**
- Фото объекта
- Тип аренды (краткосрочная/долгосрочная)
- Локация
- Цена
- RF-бейдж (если есть)
- Кнопка "Подробнее"

#### **Страница объявления (`/rielt/listings/:id`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ Студия у пляжа Камала                  │
│ 🏠 Краткосрочная • 💰 1,500 THB/ночь   │
├─────────────────────────────────────────┤
│                                         │
│ [Галерея фото]                          │
│                                         │
│ Описание объекта...                     │
│                                         │
│ Удобства:                               │
│ ✅ Wi-Fi • ✅ Кондиционер • ✅ Кухня    │
│                                         │
│ 📍 Адрес: ...                           │
│                                         │
│ Хозяин: Анна PRO                        │
│                                         │
│ [Связаться с хозяином]                 │
│ [Забронировать]                         │
└─────────────────────────────────────────┘
```

---

### 3.9 Connect Asia

**Роль:** Центр экономики и геймификации

#### **Главная страница (`/connect`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 💰 Connect Asia                         │
│ Кошелёк и достижения                    │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────┐   │
│ │ 💎 Баланс                       │   │
│ │                                 │   │
│ │ Points: 12,345                  │   │
│ │ G2A: 56.78                     │   │
│ │                                 │   │
│ │ [Обменять Points → G2A]        │   │
│ └─────────────────────────────────┘   │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ 🏆 Достижения:                          │
│ ┌─────────────────────────────────┐   │
│ │ 🎖️ Зелёный Геккон               │   │
│ │ 🎖️ Зелёный Тукан                │   │
│ └─────────────────────────────────┘   │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ 📊 Реферальная программа:               │
│ • Приглашено: 12                        │
│ • Активных: 8                           │
│ • [Пригласить друга]                    │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ 📜 История транзакций:                   │
│ [Список операций]                       │
└─────────────────────────────────────────┘
```

**Компоненты:**
- **Кошелёк** — балансы Points и G2A
- **NFT-коллекция** — бейджи и достижения
- **Реферальная программа** — статистика и ссылка
- **История транзакций** — список операций

#### **Реферальное дерево (`/connect/referrals`)**

**Структура:**
```
┌─────────────────────────────────────────┐
│ 🌳 Реферальное дерево                   │
├─────────────────────────────────────────┤
│                                         │
│         [Вы]                            │
│          │                              │
│    ┌─────┴─────┐                       │
│    │           │                        │
│ [Реферал 1] [Реферал 2]                 │
│    │           │                        │
│ [Суб]      [Суб] [Суб]                  │
│                                         │
│ Статистика:                              │
│ • Рефералов 1-го уровня: 12             │
│ • Рефералов 2-го уровня: 34             │
│ • Всего Points от сети: 5,678           │
└─────────────────────────────────────────┘
```

---

## 4. Админ-панели

### 4.1 Общая админ-панель (`/admin`)

**Роль:** Управление контентом всех модулей

#### **Структура:**

```
┌─────────────────────────────────────────┐
│ ⚙️ Админ-панель Go2Asia                 │
├─────────────────────────────────────────┤
│ [Dashboard] [Контент] [Пользователи]    │
│ [Партнёры] [Модерация] [Аналитика]     │
├─────────────────────────────────────────┤
│                                         │
│ 📊 Dashboard:                           │
│ • Пользователей: 12,345                 │
│ • Постов: 45,678                        │
│ • Событий: 1,234                        │
│ • Партнёров: 567                        │
│                                         │
│ 🔔 Последние действия:                  │
│ • Новый партнёр: Ресторан "Вкусно"     │
│ • Требует модерации: 5 постов          │
│                                         │
│ [Быстрые действия]                      │
└─────────────────────────────────────────┘
```

#### **Управление контентом (`/admin/content`)**

**Разделы:**
- **Atlas** — страны, города, места
- **Pulse** — события
- **Blog** — статьи
- **Space** — модерация постов

**CRUD-операции:**
- Создание/редактирование контента
- Загрузка медиа (drag & drop)
- Публикация/снятие с публикации
- Управление тегами и категориями

#### **Модерация (`/admin/moderation`)**

**Очередь модерации:**
- Посты Space (требующие проверки)
- Новые партнёры RF
- Жалобы пользователей
- Аномальные транзакции (Anti-Abuse)

**Действия:**
- Одобрить / Отклонить
- Редактировать / Удалить
- Заблокировать пользователя

#### **Аналитика (`/admin/analytics`)**

**Метрики:**
- DAU/MAU
- Популярность модулей
- Конверсия рефералов
- Экономические показатели (Points, G2A)

**Графики и дашборды:**
- Динамика пользователей
- Топ контента
- География пользователей

---

### 4.2 PRO-панели

#### **PRO-панель квестов (`/quest/pro`)**

Для PRO-кураторов:
- Создание квестов
- Редактирование маршрутов
- Статистика участников
- Управление наградами

#### **PRO-панель RF (`/rf/pro`)**

Для PRO-кураторов:
- Привлечение партнёров
- Управление партнёрскими профилями
- Статистика по партнёрам
- Комиссионные

---

## 5. Личные кабинеты

### 5.1 Личный кабинет пользователя (`/profile`)

**Структура:**
```
┌─────────────────────────────────────────┐
│ 👤 Мой профиль                          │
├─────────────────────────────────────────┤
│ [Профиль] [Настройки] [Безопасность]   │
├─────────────────────────────────────────┤
│                                         │
│ [Аватар] Иван                           │
│ 📧 email@example.com                    │
│ 🎯 PRO-куратор                          │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ 💰 Баланс:                               │
│ • Points: 12,345                        │
│ • G2A: 56.78                           │
│                                         │
│ 🏆 Достижения:                           │
│ [NFT-бейджи]                            │
│                                         │
│ 📊 Статистика:                           │
│ • Постов: 45                            │
│ • Лайков: 234                           │
│ • Рефералов: 12                         │
└─────────────────────────────────────────┘
```

**Разделы:**
- **Профиль** — редактирование данных
- **Настройки** — предпочтения, уведомления
- **Безопасность** — пароль, 2FA
- **Подписка** — статус VIP/PRO, оплата

### 5.2 Кабинет партнёра (`/rf/partner/dashboard`)

**Структура:**
```
┌─────────────────────────────────────────┐
│ 🏢 Кабинет партнёра                      │
├─────────────────────────────────────────┤
│ [Профиль] [Ваучеры] [Статистика]        │
├─────────────────────────────────────────┤
│                                         │
│ Ресторан "Вкусно"                       │
│ 📍 Бангкок                              │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ Активные ваучеры:                        │
│ • Скидка 10% — 45 активаций             │
│ [Создать ваучер]                        │
│                                         │
│ ─────────────────────────────────────── │
│                                         │
│ 📊 Статистика:                           │
│ • Просмотров: 1,234                     │
│ • Активаций ваучеров: 45                │
│ • Отзывов: 23                           │
│                                         │
│ [Графики]                                │
└─────────────────────────────────────────┘
```

---

## 6. Технические детали реализации

### 6.1 Компоненты дизайн-системы

Все модули используют общие компоненты из `packages/ui`:

- **Badge** — бейджи статусов (UGC, Verified, RF и т.д.)
- **Card** — универсальные карточки
- **Chip** — фильтры и теги
- **Button** — кнопки (primary, secondary, ghost)
- **TopAppBar** — верхняя панель
- **BottomNav** — нижняя навигация
- **SideDrawer** — боковое меню
- **EmptyState** — пустые состояния
- **Skeleton** — скелетоны загрузки
- **Toast** — уведомления

### 6.2 Адаптивность

**Breakpoints (Tailwind):**
- Mobile: `< 640px` (default)
- Tablet: `sm: 640px` до `md: 768px`
- Desktop: `lg: 1024px+`
- Wide: `xl: 1280px+`, `2xl: 1536px+`

**Паттерны:**
- Mobile-first подход
- Grid адаптируется: `grid-cols-1 md:grid-cols-2 lg:grid-cols-3`
- BottomNav только на мобильных
- SideDrawer только на планшетах/десктопе

### 6.3 Состояния компонентов

**Loading:**
- Skeleton компоненты при загрузке данных
- Spinner для действий

**Empty:**
- EmptyState с иконкой и описанием
- Призыв к действию (например, "Создать первый пост")

**Error:**
- Toast уведомления об ошибках
- Страницы ошибок (404, 500)

**Success:**
- Toast уведомления об успешных действиях
- Визуальная обратная связь (анимации)

### 6.4 Интеграция с API

Все модули используют единый SDK `@go2asia/api`:
- Автоматическое добавление JWT токенов
- Обработка ошибок (401 → редирект на логин)
- Retry механизмы
- Кеширование запросов

### 6.5 Аналитика

События отслеживаются через `analytics.track()`:
- Просмотры страниц
- Клики по карточкам
- Действия пользователей (лайки, комментарии)
- Конверсии (регистрации, покупки ваучеров)

---

## 7. Приоритеты разработки

### Фаза 1 (MVP):
1. ✅ PWA-оболочка с базовой навигацией
2. ✅ Стартовая страница (Landing)
3. ✅ Atlas Asia (базовые страницы)
4. ✅ Pulse Asia (список событий)
5. ✅ Blog Asia (список статей)

### Фаза 2:
1. ✅ Space Asia (социальная сеть)
2. ✅ Quest Asia (квесты)
3. ✅ Russian Friendly (каталог партнёров)
4. ✅ Connect Asia (кошелёк)
5. ✅ Админ-панель (базовая)

### Фаза 3:
1. ✅ Rielt.Market (жильё)
2. ✅ Расширенная админ-панель
3. ✅ PRO-панели
4. ✅ Личные кабинеты

---

## 8. Критические технические требования

### 8.1 Style Guide как источник правды

**Ключевой документ:** `/docs/overview/go2asia_uiux_style_guide.md`

**Правила работы:**
- ✅ **Все UI-компоненты должны строго следовать Style Guide v1.1**
- ✅ **Все Pull Request'ы UI должны ссылаться на конкретные токены/классы из Style Guide**
- ✅ **Запрещены локальные переопределения токенов без обоснования**
- ✅ **Изменения в Style Guide требуют отдельного PR и согласования**

**Пример ссылки в PR:**
```markdown
Использует токены из Style Guide:
- Цвет: `bg-sky-600` (Section 1.1 — Brand/Primary)
- Отступы: `p-5` (Section 1.4 — Spacing Scale)
- Радиус: `rounded-xl` (Section 1.3 — Border Radius)
```

**Валидация:**
- Линтер проверяет использование токенов из `@go2asia/tokens`
- CI/CD проверяет соответствие Style Guide перед мержем

### 8.2 Storybook / Компонентная библиотека

**Цель:** Визуальная проверка компонентов, документация, изоляция разработки.

**Структура:**
```
packages/ui/
├── .storybook/
│   ├── main.ts
│   └── preview.ts
├── src/
│   ├── Badge/
│   │   ├── Badge.tsx
│   │   └── Badge.stories.tsx
│   ├── Card/
│   └── ...
└── package.json
```

**Настройка Storybook:**
- Версия: Storybook 7.x
- Фреймворк: React + Next.js
- Аддон: Controls, Actions, Accessibility, Viewport
- Темы: Light (default), Dark (опционально)

**Категории историй:**
- **Design Tokens** — цвета, типографика, spacing
- **Components** — Badge, Card, Button, Chip и т.д.
- **Layouts** — TopAppBar, BottomNav, SideDrawer
- **Modules** — примеры использования в контексте модулей

**Деплой:**
- Storybook публикуется на `storybook.go2asia.space` (или Netlify)
- Автоматический деплой при изменении `packages/ui`

**Использование:**
- Разработчики проверяют компоненты визуально перед интеграцией
- Дизайнеры могут видеть все варианты компонентов
- QA тестирует компоненты изолированно

### 8.3 Acceptance критерии

**Источник:** Раздел 12 из Style Guide (`docs/overview/go2asia_uiux_style_guide.md`)

**Обязательный чеклист для каждого модуля:**

#### **Design System:**
- [ ] Используются общие токены из `@go2asia/tokens`
- [ ] Все компоненты из `@go2asia/ui`
- [ ] Layout из `@go2asia/layouts`
- [ ] Нет локальных переопределений токенов

#### **Компоненты:**
- [ ] Card, Badge, Chip, Tabs используются
- [ ] Pagination реализована (Load More)
- [ ] Skeleton для всех loading состояний
- [ ] EmptyState для пустых списков

#### **UGC (если применимо):**
- [ ] CommunityPosts интегрирован
- [ ] UGC блок ниже editorial контента
- [ ] Бейджи UGC/Verified присутствуют
- [ ] Фильтры работают

#### **Адаптивность:**
- [ ] Mobile (< 640px) — проверено
- [ ] Tablet (640-1024px) — проверено
- [ ] Desktop (1024px+) — проверено
- [ ] Grid корректно адаптируется

#### **Доступность (a11y):**
- [ ] Keyboard navigation работает
- [ ] Focus rings видимы (`focus:ring-2 focus:ring-sky-500`)
- [ ] Контраст текста AA/AAA (проверка через Lighthouse)
- [ ] ARIA labels добавлены
- [ ] Screen reader tested (NVDA / VoiceOver)

#### **Performance:**
- [ ] Lazy loading изображений (`loading="lazy"`)
- [ ] Code splitting по роутам
- [ ] Bundle size < 200kb (gzip)
- [ ] Lighthouse score > 85 (mobile, MVP) / > 90 (desktop)

#### **i18n:**
- [ ] Все строки через словарь (`useTranslation()`)
- [ ] Pluralization настроен
- [ ] Даты локализованы

#### **Analytics:**
- [ ] События трекаются (`analytics.track()`)
- [ ] IntersectionObserver для impressions
- [ ] Click events работают

**Процесс:**
- Чеклист добавляется в описание PR
- QA проверяет все пункты перед апрувом
- Невыполненные пункты блокируют мерж

### 8.4 Auth Flow: Clerk SSO

**Архитектура:**
- **Провайдер:** Clerk (единый SSO для всех модулей)
- **Домен:** Все модули на `go2asia.space` (shared cookies)
- **Токены:** JWT в httpOnly cookies + Bearer для API

#### **Flow авторизации:**

**1. Первый вход:**
```
Пользователь → [Войти] → Clerk OAuth/Email → 
Clerk устанавливает cookie → App Shell получает сессию → 
Все модули видят авторизованного пользователя
```

**2. Redirects:**
- После логина: редирект на исходную страницу (или `/`)
- После логаута: редирект на `/`
- При 401 от API: редирект на `/auth/login?redirect=/current-path`

**3. Cookie vs JWT:**
- **Cookie (httpOnly):** Используется Clerk для сессии на фронте
- **JWT (Bearer):** Извлекается из cookie и добавляется в API запросы через SDK
- **Хранение:** Cookie автоматически отправляется браузером, JWT в заголовках API

**4. Session expiry handling:**
```typescript
// В @go2asia/api SDK
if (response.status === 401) {
  // Токен истёк
  await clerk.signOut();
  window.location.href = `/auth/login?redirect=${encodeURIComponent(window.location.pathname)}`;
}
```

**5. Проверка авторизации:**
```typescript
// В компонентах
import { useUser } from '@clerk/nextjs';

const { isSignedIn, user } = useUser();

if (!isSignedIn) {
  return <GuestPrompt />;
}
```

**6. Роли пользователей:**
- Проверка через Clerk metadata: `user.publicMetadata.role`
- Роли: `spacer`, `vip`, `pro`, `partner`, `admin`
- Защита роутов через middleware

**7. Гостевой режим:**
- Большая часть контента доступна без авторизации
- Действия (лайки, комментарии, создание) требуют логина
- UI показывает "Войти, чтобы продолжить"

### 8.5 API Mocking / Contracts

**Цель:** Разработка фронтенда до готовности бекенда.

#### **MSW (Mock Service Worker)**

**Настройка:**
```typescript
// packages/api/src/mocks/handlers.ts
import { rest } from 'msw';

export const handlers = [
  rest.get('/api/v1/places', (req, res, ctx) => {
    return res(
      ctx.json({
        items: [
          { id: '1', title: 'Место 1', ... },
          { id: '2', title: 'Место 2', ... },
        ],
      })
    );
  }),
];
```

**Использование:**
- В dev-режиме: `npm run dev:mock`
- MSW перехватывает запросы к API
- Возвращает моковые данные из handlers

**Контракты:**
- OpenAPI/Swagger схемы в `docs/openapi/`
- Генерация TypeScript типов из OpenAPI (`orval` или `openapi-typescript`)
- MSW handlers соответствуют OpenAPI контрактам

**Преимущества:**
- Независимая разработка фронта и бекенда
- Тестирование edge cases (ошибки, пустые ответы)
- Демонстрация UI без бекенда

#### **Contract Testing:**

**Процесс:**
1. Фронтенд использует моки на основе OpenAPI
2. Бекенд реализует API по OpenAPI
3. Contract tests проверяют соответствие
4. При несоответствии — тесты падают

**Инструменты:**
- `@pact-foundation/pact` или
- Простые тесты сравнения ответов с OpenAPI схемой

### 8.6 Performance Budget

**Целевые метрики Lighthouse:**

#### **MVP (Фаза 1):**
- **Performance:** > 85 (mobile)
- **Accessibility:** > 90
- **Best Practices:** > 90
- **SEO:** > 90

#### **Production (Фаза 2+):**
- **Performance:** > 90 (mobile), > 95 (desktop)
- **Accessibility:** > 95
- **Best Practices:** > 95
- **SEO:** > 95

#### **Core Web Vitals:**
- **LCP (Largest Contentful Paint):** < 2.5s
- **FID (First Input Delay):** < 100ms
- **CLS (Cumulative Layout Shift):** < 0.1

#### **Bundle Size:**
- **App Shell:** < 100kb (gzip)
- **Модуль (lazy loaded):** < 200kb (gzip)
- **Общий размер (initial load):** < 200kb (gzip)

#### **Мониторинг:**
- Lighthouse CI в GitHub Actions
- Проверка на каждом PR
- Регрессии блокируют мерж
- Регулярные аудиты (раз в неделю)

#### **Оптимизации:**
- Code splitting по роутам
- Lazy loading изображений
- Prefetch критичных ресурсов
- Tree shaking неиспользуемого кода
- Минификация и сжатие (gzip/brotli)

---

## 9. Заключение

Это видение описывает полную структуру фронтенда Go2Asia как единой PWA-экосистемы, где каждый модуль имеет свою роль, но все вместе создают целостный пользовательский опыт. Все интерфейсы следуют единому Style Guide v1.1, используют общие компоненты и обеспечивают бесшовную навигацию между модулями.

**Ключевые принципы:**
- Mobile-first дизайн
- Единая дизайн-система (Style Guide как источник правды)
- Модульная архитектура
- Офлайн-дружелюбность
- Высокая производительность (Lighthouse > 85 mobile)
- Доступность (a11y WCAG AA/AAA)
- Компонентная библиотека (Storybook)
- Контрактное программирование (OpenAPI + MSW)

**Процесс разработки:**
- Все UI-изменения ссылаются на Style Guide
- Acceptance критерии проверяются перед мержем
- Performance budget контролируется автоматически
- Компоненты документируются в Storybook

---

**Версия:** 1.1  
**Дата:** 2024-11-14  
**Статус:** Vision Document — готов к реализации  
**Источник правды:** `/docs/overview/go2asia_uiux_style_guide.md`

