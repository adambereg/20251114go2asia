# üìä –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –§–∞–∑–µ 0

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-11-14  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–í–µ—Ä—Å–∏—è:** 2.0

---

## üìà –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å

**–í—Å–µ –∑–∞–¥–∞—á–∏ –§–∞–∑—ã 0 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:** ‚úÖ 100%

### –°—Ç–∞—Ç—É—Å –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–≥—Ä–µ—Å—Å |
|-----------|--------|----------|
| –ú–æ–Ω–æ—Ä–µ–ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | ‚úÖ | 100% |
| OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ | ‚úÖ | 100% |
| CI/CD Pipeline | ‚úÖ | 100% |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ | 100% |
| –î–µ–ø–ª–æ–π –≤ Staging | ‚úÖ | 100% |
| Health endpoints | ‚úÖ | 100% |

---

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–π

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ pnpm-lock.yaml –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

**–°–∏–º–ø—Ç–æ–º—ã:**
- CI/CD –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π: `Dependencies lock file is not found`
- GitHub Actions –Ω–µ –º–æ–≥ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ü—Ä–∏—á–∏–Ω–∞:**
- `pnpm-lock.yaml` –Ω–µ –±—ã–ª –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- `.gitignore` –º–æ–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª (–Ω–æ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ñ–∞–π–ª –ø—Ä–æ—Å—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª)

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–ø–æ–ª–Ω–µ–Ω `pnpm install` –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ lockfile
- `pnpm-lock.yaml` –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –û–±–Ω–æ–≤–ª—ë–Ω –ø—Ä–æ—Ü–µ—Å—Å: lockfile –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

**–£—Ä–æ–∫:** –í—Å–µ–≥–¥–∞ –∫–æ–º–º–∏—Ç–∏—Ç—å lockfile –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ —Å–±–æ—Ä–æ–∫.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Next.js 15 –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å swcMinify

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏: `Invalid next.config.js options detected: Unrecognized key(s) in object: 'swcMinify'`
- –î–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –ø–∞–¥–∞–ª

**–ü—Ä–∏—á–∏–Ω–∞:**
- `swcMinify: true` –±—ã–ª —É–¥–∞–ª—ë–Ω –∏–∑ Next.js 15 (minification –≤–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–†–µ—à–µ–Ω–∏–µ:**
- –£–¥–∞–ª—ë–Ω `swcMinify: true` –∏–∑ `apps/go2asia-pwa-shell/next.config.js`
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Next.js 15

**–£—Ä–æ–∫:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ major –≤–µ—Ä—Å–∏–π –ø—Ä–æ–≤–µ—Ä—è—Ç—å breaking changes –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ params –≤ Next.js 15

**–°–∏–º–ø—Ç–æ–º—ã:**
- TypeScript –æ—à–∏–±–∫–∞: `Type '{ id: string; }' is missing the following properties from type 'Promise<any>'`
- –°—Ç—Ä–∞–Ω–∏—Ü—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ä–æ—É—Ç–∞–º–∏ –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª–∏—Å—å

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í Next.js 15 `params` —Å—Ç–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º (`Promise<{ id: string }>`)
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ `params`

**–†–µ—à–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `generateMetadata` –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü:
  ```typescript
  // –ë—ã–ª–æ:
  export async function generateMetadata({ params }: { params: { id: string } })
  
  // –°—Ç–∞–ª–æ:
  export async function generateMetadata({ params }: { params: Promise<{ id: string }> })
  const { id } = await params;
  ```

**–£—Ä–æ–∫:** –°–ª–µ–¥–∏—Ç—å –∑–∞ breaking changes –≤ Next.js –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤–µ—Ä—Å–∏–π.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è health endpoints

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ `{"error":"Not Found"}` –Ω–∞ `/health`
- API Gateway —Ä–∞–±–æ—Ç–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å `/health/health`

**–ü—Ä–∏—á–∏–Ω–∞:**
- Health routes –±—ã–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–∞–∫ `/health` –≤–Ω—É—Ç—Ä–∏ —Ä–æ—É—Ç–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ `app.route('/health', healthRoutes)`
- –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ø—É—Ç—å `/health/health` –≤–º–µ—Å—Ç–æ `/health`

**–†–µ—à–µ–Ω–∏–µ:**
- –ò–∑–º–µ–Ω–µ–Ω—ã —Ä–æ—É—Ç—ã –≤ `health.ts` —Å `/health` –Ω–∞ `/`:
  ```typescript
  // –ë—ã–ª–æ:
  app.get('/health', ...)
  
  // –°—Ç–∞–ª–æ:
  app.get('/', ...)  // –ü—Ä–µ—Ñ–∏–∫—Å /health —É–∂–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
  ```

**–£—Ä–æ–∫:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `app.route()` —Ä–æ—É—Ç—ã –≤–Ω—É—Ç—Ä–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏, –∞ –Ω–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 5: GitHub Actions –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å secrets –≤ if —É—Å–ª–æ–≤–∏—è—Ö

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ workflow: `Unrecognized named-value: 'secrets'`
- –î–µ–ø–ª–æ–π –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:**
- GitHub Actions –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –ø—Ä–æ–≤–µ—Ä—è—Ç—å `secrets` –≤ `if` —É—Å–ª–æ–≤–∏—è—Ö –ø–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `if: ${{ secrets.SECRET_NAME != '' }}` –≤—ã–∑—ã–≤–∞–ª–∞ –æ—à–∏–±–∫—É

**–†–µ—à–µ–Ω–∏–µ:**
- –£–¥–∞–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `if: ${{ secrets.SECRET_NAME != '' }}`
- –î–æ–±–∞–≤–ª–µ–Ω `continue-on-error: true` –¥–ª—è Netlify (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π)
- Cloudflare –¥–µ–ø–ª–æ–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±–µ–∑ —É—Å–ª–æ–≤–∏–π (–ø–∞–¥–∞—é—Ç, –µ—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç)

**–£—Ä–æ–∫:** GitHub Actions –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ secrets –≤ —É—Å–ª–æ–≤–∏—è—Ö. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `continue-on-error` –∏–ª–∏ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 6: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å TOML –≤ wrangler.toml

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ –¥–µ–ø–ª–æ—è: `Unterminated inline array`
- Cloudflare Workers –Ω–µ –¥–µ–ø–ª–æ–∏–ª–∏—Å—å

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è `vars` –≤ TOML –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–∞—Ä—Å–µ—Ä–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ñ–æ—Ä–º–∞—Ç:
  ```toml
  vars = {
    NODE_ENV = "staging"
  }
  ```

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –Ω–∞ –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π:
  ```toml
  vars = { NODE_ENV = "staging" }
  ```

**–£—Ä–æ–∫:** TOML –ø–∞—Ä—Å–µ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–≥–∏–º–∏ –∫ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è inline tables.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 7: process.env –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ Cloudflare Workers

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ –¥–µ–ø–ª–æ—è: `Uncaught ReferenceError: process is not defined`
- Content Service –Ω–µ –º–æ–≥ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î

**–ü—Ä–∏—á–∏–Ω–∞:**
- Cloudflare Workers –Ω–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ `process.env`
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `env` bindings –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∑–∞–ø—Ä–æ—Å–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `services/content-service/src/db/index.ts`:
  - –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createDb(env)` –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `process.env`
  - –î–æ–±–∞–≤–ª–µ–Ω middleware –¥–ª—è –∏–Ω—ä–µ–∫—Ü–∏–∏ –ë–î –≤ Hono context:
    ```typescript
    app.use('*', async (c, next) => {
      const db = createDb(c.env);
      c.set('db', db);
      await next();
    });
    ```
  - –í—Å–µ routes –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `c.get('db')`

**–£—Ä–æ–∫:** Cloudflare Workers –∏—Å–ø–æ–ª—å–∑—É—é—Ç `env` bindings –≤–º–µ—Å—Ç–æ `process.env`. –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `env` —è–≤–Ω–æ.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 8: –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–µ –ø–æ–ª–µ persist –≤ observability

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: `Unexpected fields found in observability field: "persist"`
- –î–µ–ø–ª–æ–π –ø—Ä–æ—Ö–æ–¥–∏–ª, –Ω–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–æ–ª–µ `persist = true` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ `[observability.logs]` –∏ `[observability.traces]` –≤ Cloudflare Workers

**–†–µ—à–µ–Ω–∏–µ:**
- –£–¥–∞–ª–µ–Ω–æ `persist = true` –∏–∑ –≤—Å–µ—Ö `wrangler.toml` —Ñ–∞–π–ª–æ–≤

**–£—Ä–æ–∫:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Cloudflare Workers –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 9: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ dotenv –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ DATABASE_URL

**–°–∏–º–ø—Ç–æ–º—ã:**
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏: `Invalid input Either "connectionString" or "host", "database" are required`
- `DATABASE_URL` –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –∏–∑ `.env` —Ñ–∞–π–ª–∞

**–ü—Ä–∏—á–∏–Ω–∞:**
- `drizzle.config.ts` —á–∏—Ç–∞–ª `process.env.DATABASE_URL`, –Ω–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env` –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- Node.js –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç `.env` —Ñ–∞–π–ª—ã –±–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `dotenv`

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω `dotenv` –≤ `devDependencies` —Å–µ—Ä–≤–∏—Å–∞
- –û–±–Ω–æ–≤–ª—ë–Ω `drizzle.config.ts` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ `.env`:
  ```typescript
  import { config } from 'dotenv';
  import { resolve } from 'path';
  import { existsSync } from 'fs';
  
  const possiblePaths = [
    resolve(process.cwd(), '.env'),
    resolve(process.cwd(), '../../.env'),
  ];
  
  for (const envPath of possiblePaths) {
    if (existsSync(envPath)) {
      config({ path: envPath });
      break;
    }
  }
  ```

**–£—Ä–æ–∫:** –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ `.env` —Ñ–∞–π–ª–æ–≤ –≤ Node.js –Ω—É–∂–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `dotenv`. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—É—Ç–µ–π –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 10: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Drizzle ORM –¥–ª—è —Å—ã—Ä–æ–≥–æ SQL

**–°–∏–º–ø—Ç–æ–º—ã:**
- Health endpoint –≤–æ–∑–≤—Ä–∞—â–∞–ª: `{"status":"not ready","error":"query.getSQL is not a function"}`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL: `db.execute('SELECT 1')`
- Drizzle ORM —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sql` helper –¥–ª—è —Å—ã—Ä–æ–≥–æ SQL

**–†–µ—à–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª—ë–Ω –∫–æ–¥ –≤ `services/content-service/src/routes/health.ts`:
  ```typescript
  // –ë—ã–ª–æ:
  await db.execute('SELECT 1');
  
  // –°—Ç–∞–ª–æ:
  import { sql } from 'drizzle-orm';
  await db.execute(sql`SELECT 1`);
  ```

**–£—Ä–æ–∫:** Drizzle ORM —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `sql` helper –¥–ª—è —Å—ã—Ä–æ–≥–æ SQL. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å template literals —Å `sql`.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 11: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ pnpm-lock.yaml –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–°–∏–º–ø—Ç–æ–º—ã:**
- CI/CD –ø–∞–¥–∞–ª: `ERR_PNPM_OUTDATED_LOCKFILE Cannot install with "frozen-lockfile"`
- Lockfile –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª `package.json` –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `dotenv`

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `dotenv` –≤ `package.json` –Ω–µ –±—ã–ª –æ–±–Ω–æ–≤–ª—ë–Ω `pnpm-lock.yaml`
- CI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `--frozen-lockfile` –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –í—ã–ø–æ–ª–Ω–µ–Ω `pnpm install` –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è lockfile
- –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `pnpm-lock.yaml` –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**–£—Ä–æ–∫:** –ü–æ—Å–ª–µ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `package.json` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–ª—è—Ç—å lockfile –∏ –∫–æ–º–º–∏—Ç–∏—Ç—å –µ–≥–æ.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|------------|--------------|
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | 4 | –°—Ä–µ–¥–Ω—è—è |
| –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π | 3 | –í—ã—Å–æ–∫–∞—è |
| –û–∫—Ä—É–∂–µ–Ω–∏–µ/Deployment | 4 | –í—ã—Å–æ–∫–∞—è |
| **–í—Å–µ–≥–æ** | **11** | - |

### –í—Ä–µ–º—è –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:

- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** ~30 –º–∏–Ω—É—Ç
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π:** ~1 —á–∞—Å
- **–û–∫—Ä—É–∂–µ–Ω–∏–µ/Deployment:** ~2 —á–∞—Å–∞
- **–ò—Ç–æ–≥–æ:** ~3.5 —á–∞—Å–∞

---

## ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –§–∞–∑—ã 0

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- ‚úÖ –ú–æ–Ω–æ—Ä–µ–ø–æ —Å pnpm workspaces –∏ Turborepo
- ‚úÖ 5 —Å–µ—Ä–≤–∏—Å–æ–≤ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã –≤ Cloudflare Workers (staging)
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Neon –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- ‚úÖ CI/CD pipeline –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
- ‚úÖ OpenAPI-first –ø–æ–¥—Ö–æ–¥ —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Ç–∏–ø–æ–≤ –∏ SDK
- ‚úÖ –í—Å–µ health endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–∞
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ JWT —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É (jose)
- ‚úÖ Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ Secrets —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ GitHub Environments

---

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –§–∞–∑–µ 1

### ‚úÖ –ì–æ—Ç–æ–≤–æ:
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- CI/CD pipeline —Å—Ç–∞–±–∏–ª–µ–Ω
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ health checks

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
- Netlify –¥–µ–ø–ª–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–∑–∂–µ)
- Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ, –Ω–æ –Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ)
- Seed –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ë–î (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞, –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã)

### üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –§–∞–∑–æ–π 1:
1. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î (seeds)
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å production –¥–µ–ø–ª–æ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª—ë—Ä—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:
- Unit —Ç–µ—Å—Ç—ã: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞, —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- E2E —Ç–µ—Å—Ç—ã: –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã, –ø—Ä–∏–º–µ—Ä—ã —Å–æ–∑–¥–∞–Ω—ã
- Contract —Ç–µ—Å—Ç—ã: –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ Schemathesis

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏: 100%
- ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 100%
- ‚úÖ –ü–ª–∞–Ω—ã –∏ —á–µ–∫-–ª–∏—Å—Ç—ã: 100%

### CI/CD:
- ‚úÖ PR checks: –†–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ Staging deployments: –†–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ Production deployments: –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã (—Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫)

---

## üéì –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ —É—Ä–æ–∫–∏

1. **–í—Å–µ–≥–¥–∞ –∫–æ–º–º–∏—Ç–∏—Ç—å lockfile** ‚Äî —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ —Å–±–æ—Ä–æ–∫
2. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å breaking changes** –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ major –≤–µ—Ä—Å–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–µ–ø–ª–æ–π –Ω–∞ staging** –ø–µ—Ä–µ–¥ production
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è** –¥–ª—è –±—É–¥—É—â–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
5. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã** –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sql` helper –≤ Drizzle)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–§–∞–∑–∞ 1)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è endpoints –¥–ª—è Content Service
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è endpoints –¥–ª—è Auth Service
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è endpoints –¥–ª—è Token Service
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è endpoints –¥–ª—è Referral Service

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∫ API
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Clerk
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ unit —Ç–µ—Å—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ integration —Ç–µ—Å—Ç–æ–≤
- E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-14  
**–ê–≤—Ç–æ—Ä:** AI Assistant (Composer)  
**–í–µ—Ä—Å–∏—è:** 2.0

