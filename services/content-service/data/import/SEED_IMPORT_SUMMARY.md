# –°–≤–æ–¥–∫–∞ –ø–æ –∏–º–ø–æ—Ä—Ç—É –¥–∞–Ω–Ω—ã—Ö

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-14  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –ë–î (`schema.ts`)
–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è –∏–∑ —Å—Ç–∞—Ä–æ–π —Å—Ö–µ–º—ã:
- **Countries:** `capital`, `population`, `currency`, `language`, `area`, `timezone`, `nameEn`, `heroImage`, `gallery[]`
- **Cities:** `image`
- **Places:** `address`, `rating`
- **Events:** `address`, `contact` (JSONB)
- **Articles:** `featured`, `views`

### 2. –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è (`0001_add_missing_fields.sql`)
–ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã.

### 3. –°–æ–∑–¥–∞–Ω seed-—Å–∫—Ä–∏–ø—Ç (`seed-import.ts`)
–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
- –ü–∞—Ä—Å–∏–Ω–≥ CSV —Ñ–∞–π–ª–æ–≤
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ö–µ–º—É
- –ú–∞–ø–ø–∏–Ω–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ `media_files.csv`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `city_id` –¥–ª—è events
- –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

---

## üìã –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### Countries
- ‚úÖ –í—Å–µ –ø–æ–ª—è –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ `gallery` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –∏–∑ JSON –≤ –º–∞—Å—Å–∏–≤

### Cities
- ‚úÖ `coordinates` JSONB ‚Üí `latitude` –∏ `longitude`
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞–ø–ø—è—Ç—Å—è –∏–∑ `media_files` –ø–æ `entity_type='city'`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ `image`

### Places
- ‚úÖ `coordinates` JSONB ‚Üí `latitude` –∏ `longitude`
- ‚úÖ `category` ‚Üí `type`
- ‚úÖ `tags` JSONB ‚Üí `categories[]`
- ‚úÖ `images` JSONB ‚Üí `photos[]`
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞–ø–ø—è—Ç—Å—è –∏–∑ `media_files` –ø–æ `entity_type='place'`
- ‚úÖ –î–æ–±–∞–≤–ª—è—é—Ç—Å—è `address` –∏ `rating`

### Events
- ‚úÖ `start_date` ‚Üí `start_time`
- ‚úÖ `end_date` ‚Üí `end_time`
- ‚úÖ `organizer` ‚Üí `organizer_id`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `city_id` –ø–æ –∞–¥—Ä–µ—Å—É –∏–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
- ‚úÖ –î–æ–±–∞–≤–ª—è—é—Ç—Å—è `address` –∏ `contact` (JSONB)

### Articles
- ‚úÖ –ü–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑ `images[]` ‚Üí `cover_image`
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞–ø–ø—è—Ç—Å—è –∏–∑ `media_files` –ø–æ `entity_type='article'`
- ‚úÖ `tags` JSONB ‚Üí `tags[]`
- ‚úÖ –î–æ–±–∞–≤–ª—è—é—Ç—Å—è `featured` –∏ `views`

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
cd services/content-service
pnpm db:migrate:up
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç
```bash
pnpm db:seed:import
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
SELECT COUNT(*) FROM countries;  -- –û–∂–∏–¥–∞–µ—Ç—Å—è: 9
SELECT COUNT(*) FROM cities;     -- –û–∂–∏–¥–∞–µ—Ç—Å—è: 12
SELECT COUNT(*) FROM places;     -- –û–∂–∏–¥–∞–µ—Ç—Å—è: 18
SELECT COUNT(*) FROM events;     -- –û–∂–∏–¥–∞–µ—Ç—Å—è: 8
SELECT COUNT(*) FROM articles;   -- –û–∂–∏–¥–∞–µ—Ç—Å—è: 5
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Events:** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `city_id` –ø–æ –∞–¥—Ä–µ—Å—É –∏–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º. –ï—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å, —Å–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ.

2. **Places:** –ó–∞–ø–∏—Å–∏ –±–µ–∑ `city_id` –∏–ª–∏ `coordinates` –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã.

3. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** –ú–∞–ø–ø–∏–Ω–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ `media_files.csv` –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ `entity_type` –∏ `entity_id`.

4. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫:** –°–∫—Ä–∏–ø—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω - –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω—ã.

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞:
- ‚úÖ 9 —Å—Ç—Ä–∞–Ω —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚úÖ 12 –≥–æ—Ä–æ–¥–æ–≤ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- ‚úÖ 18 –º–µ—Å—Ç —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
- ‚úÖ 8 —Å–æ–±—ã—Ç–∏–π —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –≥–æ—Ä–æ–¥–∞–º
- ‚úÖ 5 —Å—Ç–∞—Ç–µ–π —Å –æ–±–ª–æ–∂–∫–∞–º–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-14  
**–í–µ—Ä—Å–∏—è:** 1.0

